var qt=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var me=(e,t,n)=>{if(!t.has(e))throw TypeError("Cannot "+n)};var o=(e,t,n)=>(me(e,t,"read from private field"),n?n.call(e):t.get(e)),u=(e,t,n)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,n)},v=(e,t,n,r)=>(me(e,t,"write to private field"),r?r.call(e,n):t.set(e,n),n);var m=(e,t,n)=>(me(e,t,"access private method"),n);var oo=qt((b,w)=>{(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerpolicy&&(a.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?a.credentials="include":i.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();function kt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function oe(e){return function(t){if(Array.isArray(t))return be(t)}(e)||function(t){if(typeof Symbol<"u"&&Symbol.iterator in Object(t))return Array.from(t)}(e)||function(t,n){if(!!t){if(typeof t=="string")return be(t,n);var r=Object.prototype.toString.call(t).slice(8,-1);if(r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set")return Array.from(t);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return be(t,n)}}(e)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()}function be(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var qe,we,j,Te,ke,se=(qe=["a[href]","area[href]",'input:not([disabled]):not([type="hidden"]):not([aria-hidden])',"select:not([disabled]):not([aria-hidden])","textarea:not([disabled]):not([aria-hidden])","button:not([disabled]):not([aria-hidden])","iframe","object","embed","[contenteditable]",'[tabindex]:not([tabindex^="-"])'],we=function(){function e(r){var i=r.targetModal,a=r.triggers,s=a===void 0?[]:a,c=r.onShow,l=c===void 0?function(){}:c,h=r.onClose,d=h===void 0?function(){}:h,_=r.openTrigger,A=_===void 0?"data-micromodal-trigger":_,T=r.closeTrigger,P=T===void 0?"data-micromodal-close":T,Be=r.openClass,Rt=Be===void 0?"is-open":Be,Ne=r.disableScroll,Gt=Ne!==void 0&&Ne,Ue=r.disableFocus,Bt=Ue!==void 0&&Ue,ze=r.awaitCloseAnimation,Nt=ze!==void 0&&ze,He=r.awaitOpenAnimation,Ut=He!==void 0&&He,Ke=r.debugMode,zt=Ke!==void 0&&Ke;(function(Ht,Kt){if(!(Ht instanceof Kt))throw new TypeError("Cannot call a class as a function")})(this,e),this.modal=document.getElementById(i),this.config={debugMode:zt,disableScroll:Gt,openTrigger:A,closeTrigger:P,openClass:Rt,onShow:l,onClose:d,awaitCloseAnimation:Nt,awaitOpenAnimation:Ut,disableFocus:Bt},s.length>0&&this.registerTriggers.apply(this,oe(s)),this.onClick=this.onClick.bind(this),this.onKeydown=this.onKeydown.bind(this)}var t,n;return t=e,(n=[{key:"registerTriggers",value:function(){for(var r=this,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];a.filter(Boolean).forEach(function(c){c.addEventListener("click",function(l){return r.showModal(l)})})}},{key:"showModal",value:function(){var r=this,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;if(this.activeElement=document.activeElement,this.modal.setAttribute("aria-hidden","false"),this.modal.classList.add(this.config.openClass),this.scrollBehaviour("disable"),this.addEventListeners(),this.config.awaitOpenAnimation){var a=function s(){r.modal.removeEventListener("animationend",s,!1),r.setFocusToFirstNode()};this.modal.addEventListener("animationend",a,!1)}else this.setFocusToFirstNode();this.config.onShow(this.modal,this.activeElement,i)}},{key:"closeModal",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,i=this.modal;if(this.modal.setAttribute("aria-hidden","true"),this.removeEventListeners(),this.scrollBehaviour("enable"),this.activeElement&&this.activeElement.focus&&this.activeElement.focus(),this.config.onClose(this.modal,this.activeElement,r),this.config.awaitCloseAnimation){var a=this.config.openClass;this.modal.addEventListener("animationend",function s(){i.classList.remove(a),i.removeEventListener("animationend",s,!1)},!1)}else i.classList.remove(this.config.openClass)}},{key:"closeModalById",value:function(r){this.modal=document.getElementById(r),this.modal&&this.closeModal()}},{key:"scrollBehaviour",value:function(r){if(this.config.disableScroll){var i=document.querySelector("body");switch(r){case"enable":Object.assign(i.style,{overflow:""});break;case"disable":Object.assign(i.style,{overflow:"hidden"})}}}},{key:"addEventListeners",value:function(){this.modal.addEventListener("touchstart",this.onClick),this.modal.addEventListener("click",this.onClick),document.addEventListener("keydown",this.onKeydown)}},{key:"removeEventListeners",value:function(){this.modal.removeEventListener("touchstart",this.onClick),this.modal.removeEventListener("click",this.onClick),document.removeEventListener("keydown",this.onKeydown)}},{key:"onClick",value:function(r){(r.target.hasAttribute(this.config.closeTrigger)||r.target.parentNode.hasAttribute(this.config.closeTrigger))&&(r.preventDefault(),r.stopPropagation(),this.closeModal(r))}},{key:"onKeydown",value:function(r){r.keyCode===27&&this.closeModal(r),r.keyCode===9&&this.retainFocus(r)}},{key:"getFocusableNodes",value:function(){var r=this.modal.querySelectorAll(qe);return Array.apply(void 0,oe(r))}},{key:"setFocusToFirstNode",value:function(){var r=this;if(!this.config.disableFocus){var i=this.getFocusableNodes();if(i.length!==0){var a=i.filter(function(s){return!s.hasAttribute(r.config.closeTrigger)});a.length>0&&a[0].focus(),a.length===0&&i[0].focus()}}}},{key:"retainFocus",value:function(r){var i=this.getFocusableNodes();if(i.length!==0)if(i=i.filter(function(s){return s.offsetParent!==null}),this.modal.contains(document.activeElement)){var a=i.indexOf(document.activeElement);r.shiftKey&&a===0&&(i[i.length-1].focus(),r.preventDefault()),!r.shiftKey&&i.length>0&&a===i.length-1&&(i[0].focus(),r.preventDefault())}else i[0].focus()}}])&&kt(t.prototype,n),e}(),j=null,Te=function(e){if(!document.getElementById(e))return console.warn("MicroModal: \u2757Seems like you have missed %c'".concat(e,"'"),"background-color: #f8f9fa;color: #50596c;font-weight: bold;","ID somewhere in your code. Refer example below to resolve it."),console.warn("%cExample:","background-color: #f8f9fa;color: #50596c;font-weight: bold;",'<div class="modal" id="'.concat(e,'"></div>')),!1},ke=function(e,t){if(function(r){r.length<=0&&(console.warn("MicroModal: \u2757Please specify at least one %c'micromodal-trigger'","background-color: #f8f9fa;color: #50596c;font-weight: bold;","data attribute."),console.warn("%cExample:","background-color: #f8f9fa;color: #50596c;font-weight: bold;",'<a href="#" data-micromodal-trigger="my-modal"></a>'))}(e),!t)return!0;for(var n in t)Te(n);return!0},{init:function(e){var t=Object.assign({},{openTrigger:"data-micromodal-trigger"},e),n=oe(document.querySelectorAll("[".concat(t.openTrigger,"]"))),r=function(s,c){var l=[];return s.forEach(function(h){var d=h.attributes[c].value;l[d]===void 0&&(l[d]=[]),l[d].push(h)}),l}(n,t.openTrigger);if(t.debugMode!==!0||ke(n,r)!==!1)for(var i in r){var a=r[i];t.targetModal=i,t.triggers=oe(a),j=new we(t)}},show:function(e,t){var n=t||{};n.targetModal=e,n.debugMode===!0&&Te(e)===!1||(j&&j.removeEventListeners(),(j=new we(n)).showModal())},close:function(e){e?j.closeModalById(e):j.closeModal()}});typeof window<"u"&&(window.MicroModal=se);const L=Object.freeze({ArrowLeft:"arrowleft",ArrowRight:"arrowright",ArrowUp:"arrowup",ArrowDown:"arrowdown",W:"w",A:"a",S:"s",D:"d"}),ft=Object.seal({score:0,highestTile:0,date:new Date,tiles:[]}),_e=Object.seal({stats:{highestTile:0,highestScore:0},currentGame:ft}),Wt=4,Xt=19,Jt=2,We=75,Yt=500;var x,I;class Zt{constructor(t,n){u(this,x,void 0);u(this,I,void 0);this.x=t,this.y=n}get tile(){return o(this,x)}set tile(t){v(this,x,t),t&&(o(this,x).x=this.x,o(this,x).y=this.y)}get mergeTile(){return o(this,I)}set mergeTile(t){v(this,I,t),t&&(o(this,I).x=this.x,o(this,I).y=this.y)}canAccept(t){return!this.tile||!this.mergeTile&&o(this,x).value===t.value}mergeTiles(){return!this.tile||!this.mergeTile?0:(this.tile.value+=this.mergeTile.value,this.mergeTile.remove(),this.mergeTile=null,this.tile.pop(),this.tile.value)}}x=new WeakMap,I=new WeakMap;function ae(e){return e.some(t=>t.some((n,r)=>r===0||!n.tile?!1:t[r-1].canAccept(n.tile)))}var Y,Z,E,Q,Ee,F,W,ue,dt;class Qt{constructor(t,n={}){u(this,Q);u(this,F);u(this,ue);u(this,Y,[]);u(this,Z,void 0);u(this,E,void 0);const{gridSize:r=Wt,cellSize:i=Xt,cellGap:a=Jt}=n;t.innerHTML="",t.style.setProperty("--grid-size",r),t.style.setProperty("--cell-size",`${i}vmin`),t.style.setProperty("--cell-gap",`${a}vmin`),v(this,Z,t),v(this,E,r),m(this,ue,dt).call(this)}get cellsByColumn(){return this.cells.reduce((t,n)=>(t[n.x]=t[n.x]||[],t[n.x][n.y]=n,t),[])}get cellsByRow(){return this.cells.reduce((t,n)=>(t[n.y]=t[n.y]||[],t[n.y][n.x]=n,t),[])}get cells(){return o(this,Y)}get size(){return o(this,E)}randomEmptyCell(){const t=Math.random()*o(this,Q,Ee).length>>0;return o(this,Q,Ee)[t]}moveTilesUp(){return m(this,F,W).call(this,this.cellsByColumn)}moveTilesDown(){return m(this,F,W).call(this,this.cellsByColumn.map(t=>[...t].reverse()))}moveTilesLeft(){return m(this,F,W).call(this,this.cellsByRow)}moveTilesRight(){return m(this,F,W).call(this,this.cellsByRow.map(t=>[...t].reverse()))}canMoveTilesAnyDirection(){return this.canMoveTilesUp()||this.canMoveTilesDown()||this.canMoveTilesLeft()||this.canMoveTilesRight()}canMoveTilesUp(){return ae(this.cellsByColumn)}canMoveTilesDown(){return ae(this.cellsByColumn.map(t=>[...t].reverse()))}canMoveTilesLeft(){return ae(this.cellsByRow)}canMoveTilesRight(){return ae(this.cellsByRow.map(t=>[...t].reverse()))}}Y=new WeakMap,Z=new WeakMap,E=new WeakMap,Q=new WeakSet,Ee=function(){return this.cells.filter(t=>!t.tile)},F=new WeakSet,W=async function(t){await Promise.all(t.flatMap(r=>{const i=[];for(let a=1;a<r.length;a+=1){const s=r[a];if(s.tile){let c;for(let l=a-1;l>=0;l-=1){const h=r[l];if(!h.canAccept(s.tile))break;c=h}c!=null&&(i.push(s.tile.awaitTransition()),c.tile!=null?c.mergeTile=s.tile:c.tile=s.tile,s.tile=null)}}return i}));let n=0;return this.cells.forEach(r=>{r.mergeTile&&r.tile&&(n+=r.tile.value+r.mergeTile.value),r.mergeTiles()}),n},ue=new WeakSet,dt=function(){const t=o(this,E)*o(this,E);for(let n=0;n<t;n+=1){const r=document.createElement("div");r.classList.add("cell"),o(this,Y).push(new Zt(n%o(this,E),Math.floor(n/o(this,E)))),o(this,Z).append(r)}return this};function Xe(e){e.preventDefault()}var R,N,U,C,he,pt,fe,gt;class Vt{constructor(t,n){u(this,he);u(this,fe);u(this,R,void 0);u(this,N,void 0);u(this,U,void 0);u(this,C,void 0);v(this,C,n),v(this,N,m(this,fe,gt).bind(this)),v(this,U,m(this,he,pt).bind(this)),v(this,R,t)}activate(){window.addEventListener("keydown",o(this,N),{once:!0}),o(this,C).addEventListener("touchstart",o(this,U),{once:!0,passive:!1})}deactivate(){window.removeEventListener("keydown",o(this,N)),o(this,C).removeEventListener("touchstart",o(this,U))}}R=new WeakMap,N=new WeakMap,U=new WeakMap,C=new WeakMap,he=new WeakSet,pt=function(t){t.preventDefault(),this.deactivate();const n=new Date,r=t.changedTouches[0];o(this,C).addEventListener("touchmove",Xe,{passive:!1}),o(this,C).addEventListener("touchend",async i=>{i.preventDefault(),o(this,C).removeEventListener("touchmove",Xe);const a=i.changedTouches[0];if(new Date-n>Yt){this.activate();return}const s=a.pageX-r.pageX,c=a.pageY-r.pageY;Math.abs(s)>=We?await o(this,R).call(this,s>0?"ArrowRight":"ArrowLeft"):Math.abs(c)>=We&&await o(this,R).call(this,c>0?"ArrowDown":"ArrowUp"),this.activate()},{once:!0})},fe=new WeakSet,gt=async function(t){this.deactivate(),await o(this,R).call(this,t.key),this.activate()};class B extends Error{constructor(...t){super(...t),this.name="InvalidMoveError"}}function je(e){return new Promise(t=>{const n=()=>{e.removeEventListener("transitionend",n),e.removeEventListener("transitioncancel",n),e.removeEventListener("animationend",n),e.removeEventListener("animationcancel",n),t()};e.addEventListener("transitionend",n),e.addEventListener("transitioncancel",n),e.addEventListener("animationend",n),e.addEventListener("animationcancel",n)})}async function Ce(e,t){return e.dataset.animation?Promise.resolve():(e.dataset.animation=t,je(e).then(()=>{delete e.dataset.animation}))}var V,ee,te,y;class Je{constructor(t=Math.random()>.5?2:4){u(this,V,void 0);u(this,ee,void 0);u(this,te,void 0);u(this,y,void 0);v(this,y,document.createElement("div")),o(this,y).classList.add("tile"),this.value=t,Ce(o(this,y),"show")}get value(){return o(this,te)}set value(t){const n=Math.log2(t),r=100-n*9;v(this,te,t),o(this,y).textContent=t,o(this,y).style.setProperty("--background-lightness",`${r}%`),o(this,y).style.setProperty("--text-lightness",`${r<=50?90:10}%`)}get x(){return o(this,V)}set x(t){o(this,y).style.setProperty("--x",t),v(this,V,t)}get y(){return o(this,ee)}set y(t){o(this,y).style.setProperty("--y",t),v(this,ee,t)}get $ele(){return o(this,y)}remove(){o(this,y).remove()}awaitTransition(){return je(o(this,y))}pop(){return o(this,y).style.setProperty("--pop-duration","100ms"),o(this,y).style.setProperty("--pop-magnitude",Math.log2(this.value)),Ce(o(this,y),"pop")}}V=new WeakMap,ee=new WeakMap,te=new WeakMap,y=new WeakMap;function en(e){return e.split(".")}function tn(e,t){const n=e.slice();return n.push(t),n}const nn=["apply","construct","defineProperty","deleteProperty","enumerate","get","getOwnPropertyDescriptor","getPrototypeOf","has","isExtensible","ownKeys","preventExtensions","set","setPrototypeOf"],rn={get:1,set:1,deleteProperty:1,has:1,defineProperty:1,getOwnPropertyDescriptor:1};function on(e,t,n){let r=[],i={};n!==void 0&&typeof n.path<"u"&&(r=en(n.path)),n!==void 0&&typeof n.userData<"u"&&(i=n.userData);function a(s,c){const l={rootTarget:e,path:c};Object.assign(l,i);const h={};for(const d of nn){const _=rn[d],A=t[d];typeof A<"u"&&(typeof _<"u"?h[d]=function(){const T=arguments[_];return l.nest=function(P){return P===void 0&&(P=e),a(P,tn(c,T))},A.apply(l,arguments)}:h[d]=function(){return l.nest=function(T){return T===void 0&&(T={}),a(T,c)},A.apply(l,arguments)})}return new Proxy(s,h)}return a(e,r)}var an=on;function vt(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function yt(e){return e}var Ye=Math.max;function sn(e,t,n){return t=Ye(t===void 0?e.length-1:t,0),function(){for(var r=arguments,i=-1,a=Ye(r.length-t,0),s=Array(a);++i<a;)s[i]=r[t+i];i=-1;for(var c=Array(t+1);++i<t;)c[i]=r[i];return c[t]=n(s),vt(e,this,c)}}function cn(e){return function(){return e}}var ln=typeof global=="object"&&global&&global.Object===Object&&global;const mt=ln;var un=typeof self=="object"&&self&&self.Object===Object&&self,hn=mt||un||Function("return this")();const H=hn;var fn=H.Symbol;const ce=fn;var bt=Object.prototype,dn=bt.hasOwnProperty,pn=bt.toString,k=ce?ce.toStringTag:void 0;function gn(e){var t=dn.call(e,k),n=e[k];try{e[k]=void 0;var r=!0}catch{}var i=pn.call(e);return r&&(t?e[k]=n:delete e[k]),i}var vn=Object.prototype,yn=vn.toString;function mn(e){return yn.call(e)}var bn="[object Null]",wn="[object Undefined]",Ze=ce?ce.toStringTag:void 0;function pe(e){return e==null?e===void 0?wn:bn:Ze&&Ze in Object(e)?gn(e):mn(e)}function O(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var Tn="[object AsyncFunction]",_n="[object Function]",Sn="[object GeneratorFunction]",An="[object Proxy]";function De(e){if(!O(e))return!1;var t=pe(e);return t==_n||t==Sn||t==Tn||t==An}var En=H["__core-js_shared__"];const Se=En;var Qe=function(){var e=/[^.]+$/.exec(Se&&Se.keys&&Se.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function Cn(e){return!!Qe&&Qe in e}var On=Function.prototype,Mn=On.toString;function Pn(e){if(e!=null){try{return Mn.call(e)}catch{}try{return e+""}catch{}}return""}var Ln=/[\\^$.*+?()[\]{}|]/g,xn=/^\[object .+?Constructor\]$/,$n=Function.prototype,jn=Object.prototype,Dn=$n.toString,In=jn.hasOwnProperty,Fn=RegExp("^"+Dn.call(In).replace(Ln,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Rn(e){if(!O(e)||Cn(e))return!1;var t=De(e)?Fn:xn;return t.test(Pn(e))}function Gn(e,t){return e==null?void 0:e[t]}function Ie(e,t){var n=Gn(e,t);return Rn(n)?n:void 0}var Bn=function(){try{var e=Ie(Object,"defineProperty");return e({},"",{}),e}catch{}}();const le=Bn;var Nn=le?function(e,t){return le(e,"toString",{configurable:!0,enumerable:!1,value:cn(t),writable:!0})}:yt;const Un=Nn;var zn=800,Hn=16,Kn=Date.now;function qn(e){var t=0,n=0;return function(){var r=Kn(),i=Hn-(r-n);if(n=r,i>0){if(++t>=zn)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var kn=qn(Un);const Wn=kn;function wt(e,t){return Wn(sn(e,t,yt),e+"")}function Xn(){this.__data__=[],this.size=0}function ge(e,t){return e===t||e!==e&&t!==t}function ve(e,t){for(var n=e.length;n--;)if(ge(e[n][0],t))return n;return-1}var Jn=Array.prototype,Yn=Jn.splice;function Zn(e){var t=this.__data__,n=ve(t,e);if(n<0)return!1;var r=t.length-1;return n==r?t.pop():Yn.call(t,n,1),--this.size,!0}function Qn(e){var t=this.__data__,n=ve(t,e);return n<0?void 0:t[n][1]}function Vn(e){return ve(this.__data__,e)>-1}function er(e,t){var n=this.__data__,r=ve(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this}function M(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}M.prototype.clear=Xn;M.prototype.delete=Zn;M.prototype.get=Qn;M.prototype.has=Vn;M.prototype.set=er;function tr(){this.__data__=new M,this.size=0}function nr(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}function rr(e){return this.__data__.get(e)}function ir(e){return this.__data__.has(e)}var or=Ie(H,"Map");const Tt=or;var ar=Ie(Object,"create");const J=ar;function sr(){this.__data__=J?J(null):{},this.size=0}function cr(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var lr="__lodash_hash_undefined__",ur=Object.prototype,hr=ur.hasOwnProperty;function fr(e){var t=this.__data__;if(J){var n=t[e];return n===lr?void 0:n}return hr.call(t,e)?t[e]:void 0}var dr=Object.prototype,pr=dr.hasOwnProperty;function gr(e){var t=this.__data__;return J?t[e]!==void 0:pr.call(t,e)}var vr="__lodash_hash_undefined__";function yr(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=J&&t===void 0?vr:t,this}function G(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}G.prototype.clear=sr;G.prototype.delete=cr;G.prototype.get=fr;G.prototype.has=gr;G.prototype.set=yr;function mr(){this.size=0,this.__data__={hash:new G,map:new(Tt||M),string:new G}}function br(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function ye(e,t){var n=e.__data__;return br(t)?n[typeof t=="string"?"string":"hash"]:n.map}function wr(e){var t=ye(this,e).delete(e);return this.size-=t?1:0,t}function Tr(e){return ye(this,e).get(e)}function _r(e){return ye(this,e).has(e)}function Sr(e,t){var n=ye(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this}function K(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}K.prototype.clear=mr;K.prototype.delete=wr;K.prototype.get=Tr;K.prototype.has=_r;K.prototype.set=Sr;var Ar=200;function Er(e,t){var n=this.__data__;if(n instanceof M){var r=n.__data__;if(!Tt||r.length<Ar-1)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new K(r)}return n.set(e,t),this.size=n.size,this}function q(e){var t=this.__data__=new M(e);this.size=t.size}q.prototype.clear=tr;q.prototype.delete=nr;q.prototype.get=rr;q.prototype.has=ir;q.prototype.set=Er;function Fe(e,t,n){t=="__proto__"&&le?le(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function Oe(e,t,n){(n!==void 0&&!ge(e[t],n)||n===void 0&&!(t in e))&&Fe(e,t,n)}function Cr(e){return function(t,n,r){for(var i=-1,a=Object(t),s=r(t),c=s.length;c--;){var l=s[e?c:++i];if(n(a[l],l,a)===!1)break}return t}}var Or=Cr();const Mr=Or;var _t=typeof b=="object"&&b&&!b.nodeType&&b,Ve=_t&&typeof w=="object"&&w&&!w.nodeType&&w,Pr=Ve&&Ve.exports===_t,et=Pr?H.Buffer:void 0,tt=et?et.allocUnsafe:void 0;function Lr(e,t){if(t)return e.slice();var n=e.length,r=tt?tt(n):new e.constructor(n);return e.copy(r),r}var xr=H.Uint8Array;const nt=xr;function $r(e){var t=new e.constructor(e.byteLength);return new nt(t).set(new nt(e)),t}function jr(e,t){var n=t?$r(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function Dr(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}var rt=Object.create,Ir=function(){function e(){}return function(t){if(!O(t))return{};if(rt)return rt(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();const Fr=Ir;function Rr(e,t){return function(n){return e(t(n))}}var Gr=Rr(Object.getPrototypeOf,Object);const St=Gr;var Br=Object.prototype;function At(e){var t=e&&e.constructor,n=typeof t=="function"&&t.prototype||Br;return e===n}function Nr(e){return typeof e.constructor=="function"&&!At(e)?Fr(St(e)):{}}function ie(e){return e!=null&&typeof e=="object"}var Ur="[object Arguments]";function it(e){return ie(e)&&pe(e)==Ur}var Et=Object.prototype,zr=Et.hasOwnProperty,Hr=Et.propertyIsEnumerable,Kr=it(function(){return arguments}())?it:function(e){return ie(e)&&zr.call(e,"callee")&&!Hr.call(e,"callee")};const Me=Kr;var qr=Array.isArray;const Pe=qr;var kr=9007199254740991;function Ct(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=kr}function Re(e){return e!=null&&Ct(e.length)&&!De(e)}function Wr(e){return ie(e)&&Re(e)}function Xr(){return!1}var Ot=typeof b=="object"&&b&&!b.nodeType&&b,ot=Ot&&typeof w=="object"&&w&&!w.nodeType&&w,Jr=ot&&ot.exports===Ot,at=Jr?H.Buffer:void 0,Yr=at?at.isBuffer:void 0,Zr=Yr||Xr;const Mt=Zr;var Qr="[object Object]",Vr=Function.prototype,ei=Object.prototype,Pt=Vr.toString,ti=ei.hasOwnProperty,ni=Pt.call(Object);function ri(e){if(!ie(e)||pe(e)!=Qr)return!1;var t=St(e);if(t===null)return!0;var n=ti.call(t,"constructor")&&t.constructor;return typeof n=="function"&&n instanceof n&&Pt.call(n)==ni}var ii="[object Arguments]",oi="[object Array]",ai="[object Boolean]",si="[object Date]",ci="[object Error]",li="[object Function]",ui="[object Map]",hi="[object Number]",fi="[object Object]",di="[object RegExp]",pi="[object Set]",gi="[object String]",vi="[object WeakMap]",yi="[object ArrayBuffer]",mi="[object DataView]",bi="[object Float32Array]",wi="[object Float64Array]",Ti="[object Int8Array]",_i="[object Int16Array]",Si="[object Int32Array]",Ai="[object Uint8Array]",Ei="[object Uint8ClampedArray]",Ci="[object Uint16Array]",Oi="[object Uint32Array]",f={};f[bi]=f[wi]=f[Ti]=f[_i]=f[Si]=f[Ai]=f[Ei]=f[Ci]=f[Oi]=!0;f[ii]=f[oi]=f[yi]=f[ai]=f[mi]=f[si]=f[ci]=f[li]=f[ui]=f[hi]=f[fi]=f[di]=f[pi]=f[gi]=f[vi]=!1;function Mi(e){return ie(e)&&Ct(e.length)&&!!f[pe(e)]}function Pi(e){return function(t){return e(t)}}var Lt=typeof b=="object"&&b&&!b.nodeType&&b,X=Lt&&typeof w=="object"&&w&&!w.nodeType&&w,Li=X&&X.exports===Lt,Ae=Li&&mt.process,xi=function(){try{var e=X&&X.require&&X.require("util").types;return e||Ae&&Ae.binding&&Ae.binding("util")}catch{}}();const st=xi;var ct=st&&st.isTypedArray,$i=ct?Pi(ct):Mi;const xt=$i;function Le(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}var ji=Object.prototype,Di=ji.hasOwnProperty;function Ii(e,t,n){var r=e[t];(!(Di.call(e,t)&&ge(r,n))||n===void 0&&!(t in e))&&Fe(e,t,n)}function Fi(e,t,n,r){var i=!n;n||(n={});for(var a=-1,s=t.length;++a<s;){var c=t[a],l=r?r(n[c],e[c],c,n,e):void 0;l===void 0&&(l=e[c]),i?Fe(n,c,l):Ii(n,c,l)}return n}function Ri(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}var Gi=9007199254740991,Bi=/^(?:0|[1-9]\d*)$/;function $t(e,t){var n=typeof e;return t=t==null?Gi:t,!!t&&(n=="number"||n!="symbol"&&Bi.test(e))&&e>-1&&e%1==0&&e<t}var Ni=Object.prototype,Ui=Ni.hasOwnProperty;function zi(e,t){var n=Pe(e),r=!n&&Me(e),i=!n&&!r&&Mt(e),a=!n&&!r&&!i&&xt(e),s=n||r||i||a,c=s?Ri(e.length,String):[],l=c.length;for(var h in e)(t||Ui.call(e,h))&&!(s&&(h=="length"||i&&(h=="offset"||h=="parent")||a&&(h=="buffer"||h=="byteLength"||h=="byteOffset")||$t(h,l)))&&c.push(h);return c}function Hi(e){var t=[];if(e!=null)for(var n in Object(e))t.push(n);return t}var Ki=Object.prototype,qi=Ki.hasOwnProperty;function ki(e){if(!O(e))return Hi(e);var t=At(e),n=[];for(var r in e)r=="constructor"&&(t||!qi.call(e,r))||n.push(r);return n}function jt(e){return Re(e)?zi(e,!0):ki(e)}function Wi(e){return Fi(e,jt(e))}function Xi(e,t,n,r,i,a,s){var c=Le(e,n),l=Le(t,n),h=s.get(l);if(h){Oe(e,n,h);return}var d=a?a(c,l,n+"",e,t,s):void 0,_=d===void 0;if(_){var A=Pe(l),T=!A&&Mt(l),P=!A&&!T&&xt(l);d=l,A||T||P?Pe(c)?d=c:Wr(c)?d=Dr(c):T?(_=!1,d=Lr(l,!0)):P?(_=!1,d=jr(l,!0)):d=[]:ri(l)||Me(l)?(d=c,Me(c)?d=Wi(c):(!O(c)||De(c))&&(d=Nr(l))):_=!1}_&&(s.set(l,d),i(d,l,r,a,s),s.delete(l)),Oe(e,n,d)}function Ge(e,t,n,r,i){e!==t&&Mr(t,function(a,s){if(i||(i=new q),O(a))Xi(e,t,s,n,Ge,r,i);else{var c=r?r(Le(e,s),a,s+"",e,t,i):void 0;c===void 0&&(c=a),Oe(e,s,c)}},jt)}function Dt(e,t,n,r,i,a){return O(e)&&O(t)&&(a.set(t,e),Ge(e,t,void 0,Dt,a),a.delete(t)),e}function Ji(e,t,n){if(!O(n))return!1;var r=typeof t;return(r=="number"?Re(n)&&$t(t,n.length):r=="string"&&t in n)?ge(n[t],e):!1}function Yi(e){return wt(function(t,n){var r=-1,i=n.length,a=i>1?n[i-1]:void 0,s=i>2?n[2]:void 0;for(a=e.length>3&&typeof a=="function"?(i--,a):void 0,s&&Ji(n[0],n[1],s)&&(a=i<3?void 0:a,i=1),t=Object(t);++r<i;){var c=n[r];c&&e(t,c,r,a)}return t})}var Zi=Yi(function(e,t,n,r){Ge(e,t,n,r)});const Qi=Zi;var Vi=wt(function(e){return e.push(void 0,Dt),vt(Qi,void 0,e)});const eo=Vi;let D=null;try{D={..._e,...JSON.parse(localStorage.getItem("gameState"))},D.currentGame.date=new Date(D.currentGame.date),eo(D,_e)}catch{D={..._e}}const to=new an(D,{get(...e){const t=Reflect.get(...e);return t!==null&&typeof t=="object"&&!(t instanceof Date)?this.nest(t):t},set(...e){const t=Reflect.set(...e);return localStorage.setItem("gameState",JSON.stringify(D)),t}});function lt(e,{currentGame:t,stats:n}){e.querySelector("#current-game-score").textContent=t.score.toLocaleString(),e.querySelector("#highest-score").textContent=n.highestScore.toLocaleString(),e.querySelector("#current-game-best-tile").textContent=t.highestTile.toLocaleString(),e.querySelector("#highest-tile").textContent=n.highestTile.toLocaleString()}function no(e=1e3){return new Promise(t=>{setTimeout(t,e)})}const ro=document.querySelector("[data-score]"),ut=document.querySelector("[data-score-amount]");function ht(e=0,t=0){if(t>0){const n=document.createElement("div");n.textContent=`+${t.toLocaleString()}`,n.classList.add("additional-score"),ro.appendChild(n),je(n).then(()=>n.remove())}ut.textContent=e.toLocaleString(),Ce(ut,"pop")}var z,$,p,S,g,ne,xe,re,$e,de,It;class io{constructor(t){u(this,ne);u(this,re);u(this,de);u(this,z,!1);u(this,$,void 0);u(this,p,void 0);u(this,S,void 0);u(this,g,void 0);v(this,g,to),v(this,$,document.querySelector(t)),v(this,S,new Vt(m(this,de,It).bind(this),o(this,$))),se.init({onShow:n=>{n.id==="stats-modal"&&lt(n,{...o(this,g)}),o(this,S).deactivate()},onClose:()=>{o(this,p).canMoveTilesAnyDirection()?o(this,S).activate():this.resetGame()}})}init(){if(!o(this,z)){const t=[],n=document.createDocumentFragment();v(this,p,new Qt(o(this,$))),o(this,g).currentGame.tiles.forEach(r=>{const i=new Je(r.value);i.x=r.x,i.y=r.y,o(this,p).cells[o(this,p).size*r.y+r.x].tile=i,n.appendChild(i.$ele),t.push(i.awaitTransition())}),o(this,$).appendChild(n),Promise.all(t).then(()=>{o(this,p).canMoveTilesAnyDirection()||!t.length?(this.createRandomTiles(t.length===0?2:0),o(this,S).activate()):m(this,re,$e).call(this)}),ht(o(this,g).currentGame.score),v(this,z,!0)}return this}saveCurrentState(){const{tiles:t,highestTile:n}=o(this,p).cells.filter(r=>r.tile).reduce((r,i)=>(r.highestTile=Math.max(r.highestTile,i.tile.value),r.tiles.push({x:i.x,y:i.y,value:i.tile.value}),r),{tiles:[],highestTile:0});return o(this,g).currentGame.tiles=t,o(this,g).currentGame.highestTile=n,this}createRandomTiles(t=1){const n=[],r=document.createDocumentFragment();for(let i=0;i<t;i+=1){const a=o(this,p).randomEmptyCell();if(!a)break;const s=new Je;a.tile=s,r.appendChild(s.$ele),n.push(s)}return o(this,$).appendChild(r),n}resetGame(){return o(this,g).currentGame={...ft},v(this,z,!1),this.init(),this}async moveTiles(t){switch(t.toLowerCase()){case L.ArrowUp:case L.W:if(!o(this,p).canMoveTilesUp())throw new B;return o(this,p).moveTilesUp();case L.ArrowDown:case L.S:if(!o(this,p).canMoveTilesDown())throw new B;return o(this,p).moveTilesDown();case L.ArrowLeft:case L.A:if(!o(this,p).canMoveTilesLeft())throw new B;return o(this,p).moveTilesLeft();case L.ArrowRight:case L.D:if(!o(this,p).canMoveTilesRight())throw new B;return o(this,p).moveTilesRight();default:throw new B}}}z=new WeakMap,$=new WeakMap,p=new WeakMap,S=new WeakMap,g=new WeakMap,ne=new WeakSet,xe=async function(){o(this,S).deactivate(),o(this,g).stats.highestScore=Math.max(o(this,g).stats.highestScore,o(this,g).currentGame.score),o(this,g).stats.highestTile=Math.max(o(this,g).stats.highestTile,o(this,g).currentGame.highestTile),o(this,g).stats.lastTimePlayed=o(this,g).currentGame.date,m(this,re,$e).call(this)},re=new WeakSet,$e=async function(){await Promise.all(o(this,p).cells.map(async t=>(await no(50*(t.x+t.y)),t.tile?t.tile.pop():null))),se.show("stats-modal",{onShow:t=>lt(t,{...o(this,g)}),onClose:()=>this.resetGame()})},de=new WeakSet,It=async function(t){try{const n=await this.moveTiles(t);n>0&&(o(this,g).currentGame.score+=n,ht(o(this,g).currentGame.score,n));const[r]=this.createRandomTiles(1);this.saveCurrentState(),o(this,p).canMoveTilesAnyDirection()?o(this,S).activate():r?r.awaitTransition().then(()=>m(this,ne,xe).call(this)):m(this,ne,xe).call(this)}catch(n){if(!(n instanceof B))throw n;o(this,p).canMoveTilesAnyDirection()&&o(this,S).activate()}};const Ft=new io("#twenty-fourty-eight-gameboard");Ft.init();window.resetGame=e=>{e&&se.close(e),Ft.resetGame()}});export default oo();
